# Data Source: kubectl_path_documents

This provider provides a `data` resource `kubectl_path_documents` to enable ease of splitting multi-document yaml content, from a collection of matching files. Think of is as a combination of both `kubectl_filename_list` and `kubectl_file_documents`

`kubectl_path_documents` also supports rendering of Terraform Templates (similar to the template provider). This gives you the flexibility of parameterizing your manifests, and loading & templating in a single command.

## Example Usage

### Load all manifest documents from a folder via for_each (recommended)

The recommended approach is to use the `manifests` attribute and a `for_each` expression to apply the found manifests. This ensures that any additional yaml documents or removals do not cause a large amount of terraform changes.

{{tffile "examples/data-sources/path_documents/example_1.tf"}}

### Load all manifest documents via count

Raw documents can also be accessed via the `documents` attribute. Not that if the document order is changed (i.e. a new file is added), then it would trigger destruction and recreation of related documents.

{{tffile "examples/data-sources/path_documents/example_2.tf"}}

### Example Template

{{tffile "examples/data-sources/path_documents/example_3.tf"}}

### Example Template with Directives

Templates even support directives, meaning you can add conditions and another logic to your template:

{{tffile "examples/data-sources/path_documents/example_4.tf"}}

### Example Template with Looping Directive

Using a directive to generate multiple manifests is possible with using a combination of split and directive within the template:

{{tffile "examples/data-sources/path_documents/example_5.tf"}}

## Argument Reference

* `pattern` - Required. Glob pattern to search for.
* `vars` - Optional. Map of variables to use when rendering the loaded documents as templates. Currently only strings are supported.
* `sensitive_vars` - Optional. Map of sensitive variables to use when rendering the loaded documents as templates. Merged with the `vars` attribute. Currently only strings are supported.
* `disable_template` - Optional. Flag to disable template parsing of the loaded documents.

## Attribute Reference

* `manifests` - Map of YAML documents with key being the document id, and value being the document yaml. Best used with `for_each` expressions.
* `documents` - List of YAML documents (list[string]). Best used with `count` expressions.
